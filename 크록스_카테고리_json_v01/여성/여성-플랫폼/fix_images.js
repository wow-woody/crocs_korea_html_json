const fs = require('fs');

// JSON 파일 읽기
const data = JSON.parse(fs.readFileSync('여성-플랫폼.json', 'utf8'));

// HTML에서 추출한 나머지 이미지 매핑
const remainingImages = {
  // 27번부터 이미 추가된 것 제외하고 나머지
  "211751": ["211751_90H_ALT100", "211751_90H_ALT110"],
  "207241": ["207241_001_ALT100", "207241_001_ALT110"],
  "211380": ["211380_0LH_ALT100", "211380_0LH_ALT110"],
  "211540": ["211540_0HZ_ALT100", "211540_0HZ_ALT110"],
  "208547": ["208547_6TW_ALT100", "208547_6TW_ALT110"],
  "210437": ["210437_040_ALT100", "210437_040_ALT110"]
};

// HTML에서 더 추출한 이미지들 (35-66번 상품들)
const additionalImages = {
  "208626": ["208626_6IL_ALT100", "208626_6IL_ALT110"],
  "209897": ["209897_6R9_ALT100", "209897_6R9_ALT110"],
  "209909": ["209909_6R9_ALT100", "209909_6R9_ALT110"],
  "205946": ["205946_6R9_ALT100", "205946_6R9_ALT110"],
  "209950": ["209950_6R9_ALT100", "209950_6R9_ALT110"],
  "206761": ["206761_6R9_ALT100", "206761_6R9_ALT110"],
  "207937": ["207937_6R9_ALT100", "207937_6R9_ALT110"],
  "209895": ["209895_6R9_ALT100", "209895_6R9_ALT110"],
  "209893": ["209893_6R9_ALT100", "209893_6R9_ALT110"],
  "209918": ["209918_6R9_ALT100", "209918_6R9_ALT110"],
  "210713": ["210713_6R9_ALT100", "210713_6R9_ALT110"],
  "210610": ["210610_6R9_ALT100", "210610_6R9_ALT110"],
  "211324": ["211324_6R9_ALT100", "211324_6R9_ALT110"],
  "210685": ["210685_6R9_ALT100", "210685_6R9_ALT110"],
  "210655": ["210655_6R9_ALT100", "210655_6R9_ALT110"],
  "210711": ["210711_6R9_ALT100", "210711_6R9_ALT110"],
  "211144": ["211144_6R9_ALT100", "211144_6R9_ALT110"],
  "211653": ["211653_6R9_ALT100", "211653_6R9_ALT110"],
  "211646": ["211646_6R9_ALT100", "211646_6R9_ALT110"],
  "212167": ["212167_6R9_ALT100", "212167_6R9_ALT110"],
  "212169": ["212169_6R9_ALT100", "212169_6R9_ALT110"],
  "212172": ["212172_6R9_ALT100", "212172_6R9_ALT110"],
  "210623": ["210623_6R9_ALT100", "210623_6R9_ALT110"],
  "212827": ["212827_6R9_ALT100", "212827_6R9_ALT110"],
  "212829": ["212829_6R9_ALT100", "212829_6R9_ALT110"],
  "212831": ["212831_6R9_ALT100", "212831_6R9_ALT110"],
  "212833": ["212833_6R9_ALT100", "212833_6R9_ALT110"],
  "208308": ["208308_6R9_ALT100", "208308_6R9_ALT110"],
  "211249": ["211249_6R9_ALT100", "211249_6R9_ALT110"],
  "211251": ["211251_6R9_ALT100", "211251_6R9_ALT110"],
  "211254": ["211254_6R9_ALT100", "211254_6R9_ALT110"],
  "211256": ["211256_6R9_ALT100", "211256_6R9_ALT110"]
};

// 모든 이미지 매핑 결합
const allImageMappings = { ...remainingImages, ...additionalImages };

// 누락된 이미지 추가
let updatedCount = 0;
data.forEach(item => {
  const productId = item["상품 ID"];
  
  // 이미지가 비어있는 상품에만 추가
  if (allImageMappings[productId] && (!item["상품 이미지"] || item["상품 이미지"].length === 0)) {
    const images = allImageMappings[productId];
    item["상품 이미지"] = [
      `https://media.crocs.com/images/t_ok_card/f_auto%2Cq_auto/products/${images[0]}/crocs`,
      `https://media.crocs.com/images/t_ok_card/f_auto%2Cq_auto/products/${images[1]}/crocs`
    ];
    console.log(`상품 ${item["번호"]} (ID: ${productId}) 이미지 추가됨`);
    updatedCount++;
  }
});

// 결과 저장
fs.writeFileSync('여성-플랫폼.json', JSON.stringify(data, null, 2), 'utf8');
console.log(`총 ${updatedCount}개 상품의 이미지가 추가되었습니다.`);